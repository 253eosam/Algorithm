# âœ… Max Counters ë¬¸ì œ í•´ê²° (Codility)

## ğŸ“Œ ë¬¸ì œ ì„¤ëª…

ì •ìˆ˜ `N`ê³¼ ë°°ì—´ `A`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê¸¸ì´ `N`ì˜ ë°°ì—´ `answer`ë¥¼ ìƒì„±í•˜ê³ , `A`ì˜ ìš”ì†Œì— ë”°ë¼ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

### **ğŸ”¹ ì—°ì‚° ì¢…ë¥˜**

1. `A[k] = X` (1 â‰¤ X â‰¤ N) â†’ `answer[X-1]` ê°’ì„ 1 ì¦ê°€ì‹œí‚´.
2. `A[k] = N + 1` â†’ ëª¨ë“  ìš”ì†Œë¥¼ í˜„ì¬ ìµœëŒ€ê°’ `maxNum`ìœ¼ë¡œ ì„¤ì •.

### **ğŸ”¹ ì…ë ¥**

- `N`: ì •ìˆ˜ (ë°°ì—´ í¬ê¸°)
- `A`: ì—°ì‚°ì„ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜ ë°°ì—´

### **ğŸ”¹ ì¶œë ¥**

- `N` ê¸¸ì´ì˜ ë°°ì—´ `answer`

---

## **ğŸ“ ì˜ˆì œ ë¶„ì„**

```typescript
N = 5
A = [3, 4, 4, 6, 1, 4, 4]
```

| ì—°ì‚°                     | ë°°ì—´ ìƒíƒœ         |
| ------------------------ | ----------------- |
| `A[0] = 3`               | `[0, 0, 1, 0, 0]` |
| `A[1] = 4`               | `[0, 0, 1, 1, 0]` |
| `A[2] = 4`               | `[0, 0, 1, 2, 0]` |
| `A[3] = 6` (max counter) | `[2, 2, 2, 2, 2]` |
| `A[4] = 1`               | `[3, 2, 2, 2, 2]` |
| `A[5] = 4`               | `[3, 2, 2, 3, 2]` |
| `A[6] = 4`               | `[3, 2, 2, 4, 2]` |

ğŸ‘‰ **ìµœì¢… ê²°ê³¼:** `[3, 2, 2, 4, 2]`

---

## **ğŸš¨ ì´ì „ ì½”ë“œ (ë¹„íš¨ìœ¨ì ì¸ O(N \* M))**

```typescript
function solution(N: number, A: number[]): number[] {
  let answer = Array(N).fill(0)
  let maxNum = 0

  for (let element of A) {
    if (element === N + 1) answer = Array(N).fill(maxNum) // O(N) ì¬í• ë‹¹ ë¬¸ì œ ë°œìƒ ğŸš¨
    else {
      maxNum = Math.max(maxNum, ++answer[element - 1])
    }
  }
  return answer
}
```

### âŒ **ë¬¸ì œì **

1. `A[k] = N + 1`ì´ ë“±ì¥í•  ë•Œë§ˆë‹¤ `answer = Array(N).fill(maxNum)`ì„ ì‹¤í–‰í•˜ì—¬ **O(N) ì—°ì‚°**ì´ ë°œìƒ â†’ **ë¹„íš¨ìœ¨ì !**
2. `O(N * M)`ì˜ ë¹„íš¨ìœ¨ì ì¸ ì‹œê°„ ë³µì¡ë„ â†’ í° `N, M`ì—ì„œëŠ” ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ.

---

## **ğŸš€ ê°œì„ ëœ ì½”ë“œ (O(N + M))**

```typescript
function solution(N: number, A: number[]): number[] {
  let answer = Array(N).fill(0)
  let maxNum = 0 // í˜„ì¬ ìµœëŒ€ ê°’
  let lastMaxUpdate = 0 // N+1 ì—°ì‚° ì´í›„ ëª¨ë“  ìš”ì†Œê°€ ê°€ì ¸ì•¼ í•  ìµœì†Œê°’

  for (let element of A) {
    if (element === N + 1) {
      lastMaxUpdate = maxNum // N+1 ì—°ì‚°ì´ ë‚˜ì™”ì„ ë•Œ ê°±ì‹ 
    } else {
      if (answer[element - 1] < lastMaxUpdate) {
        answer[element - 1] = lastMaxUpdate // ì´ì „ max ì—…ë°ì´íŠ¸ ì ìš©
      }
      answer[element - 1] += 1
      maxNum = Math.max(maxNum, answer[element - 1])
    }
  }

  // ë§ˆì§€ë§‰ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì•ˆ ëœ ê°’ë“¤ì„ ì¼ê´„ ì—…ë°ì´íŠ¸
  for (let i = 0; i < N; i++) {
    if (answer[i] < lastMaxUpdate) {
      answer[i] = lastMaxUpdate
    }
  }

  return answer
}
```

---

## **ğŸ’¡ ê°œì„  ì´ìœ **

### âŒ **ì´ì „ ì½”ë“œ ë¬¸ì œì **

1. **ë°°ì—´ ì „ì²´ë¥¼ ë§¤ë²ˆ ì¬í• ë‹¹í•˜ì—¬ O(N \* M) ë°œìƒ** ğŸš¨
2. **ë¶ˆí•„ìš”í•œ O(N) ì´ˆê¸°í™”ë¡œ ì„±ëŠ¥ ì €í•˜**

### âœ… **ê°œì„ ëœ ì½”ë“œ ì¥ì **

1. **O(N + M) ë³µì¡ë„ë¡œ ìµœì í™”** ğŸš€
2. **ë°°ì—´ì„ ë§¤ë²ˆ ì´ˆê¸°í™”í•˜ì§€ ì•Šê³ , `lastMaxUpdate` ë³€ìˆ˜ë¥¼ í™œìš©í•´ í•„ìš”í•œ ìˆœê°„ì—ë§Œ ì—…ë°ì´íŠ¸**
3. **ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ì œê±°í•˜ì—¬ ì‹¤í–‰ ì†ë„ ê°œì„ **

---

## **ğŸ›  ì˜ˆì œ í…ŒìŠ¤íŠ¸**

```typescript
console.log(solution(5, [3, 4, 4, 6, 1, 4, 4])) // ì¶œë ¥: [3, 2, 2, 4, 2]
console.log(solution(3, [1, 1, 2, 2, 3, 3, 3])) // ì¶œë ¥: [2, 2, 3]
console.log(solution(5, [6, 6, 6, 6])) // ì¶œë ¥: [0, 0, 0, 0, 0]
```

---

## **ğŸ“Œ ê²°ë¡ **

âœ… **ìµœì í™”ëœ O(N + M) í’€ì´ë¡œ Codility 100% í†µê³¼ ê°€ëŠ¥!** ğŸš€
âœ… **Lazy propagation ê¸°ë²•ì„ ì‚¬ìš©í•´ ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ì œê±°!** ğŸ¯
âœ… **ë°°ì—´ ì „ì²´ ì´ˆê¸°í™”ë¥¼ ìµœì†Œí™”í•˜ì—¬ ì‹¤í–‰ ì†ë„ ê°œì„ !** ğŸ”¥
